## ch004_014
``` c++
1)　#include　<iostream>
2)　#include　<iomanip>
3)　#include　<cmath>
4)　using　namespace　std;

5)　void　main()
6)　{
7)　　int　n　=　1;　　　　　//初值
8)　　　double　a　=　0,　b　=　1;
9)　　　double　h,　Tn,　T2n,　In,　I2n;
10)　　　const　double　eps　=　1e-8;

11)　　　h　=　b　-　a;
12)　　　double　　fa　=　exp(a)　/　(1　+　a*a);　　//计算f(a)的值
13)　　　double　　fb　=　exp(b)　/　(1　+　b*b);　　//计算f(b)的值
14)　　　T2n　=　I2n　=　h*(fa　+　fb)　/　2;
15)　　　In　=　0;

16)　　　while　(fabs(I2n　-　In)　>=　eps){　　　　//求积分
17)　　　　　double　sigma　=　0.0;
18)　　　　　for　(int　i　=　0;　i　<　n;　i++){　　　　//求变步长梯形的和部分
19)　　　　　　　double　x　=　a　+　(i　+　0.5)*h;
20)　　　　　　　sigma　+=　exp(x)　/　(1　+　x*x);　//计算f(x)的值并求和
21)　　　　　}

22)　　　　　Tn　=　T2n;
23)　　　　　In　=　I2n;
24)　　　　　T2n　=　(Tn　+　h*sigma)　/　2.0;　　　　　　//变步长梯形
25)　　　　　I2n　=　(4　*　T2n　-　Tn)　/　3.0;　　　　　　　　//辛普生公式

26)　　　　　n　*=　2;　　　　　　//调整循环变量的值
27)　　　　　h　/=　2;
28)　　　}
29)　　　cout　<<　"the　integral　of　f(x)　from　"
30)　　　　　<<　a　<<　"　to　"　<<　b　<<　"　is　\n"
31)　　　　　<<　setiosflags(ios::fixed)
32)　　　　　<<　setprecision(8)
33)　　　　　<<　setw(10)　<<　I2n　<<　endl;　　　　//输出结果
34)　}

```
### 题目22873
问题：1.　　该程序执行结果是？
A.1.27072414　　
B.1.28456821
C.1.29875423
D.2.31564789


**解析如下：**

------

解析：该程序使用梯形法和辛普生公式来计算函数 f(x) = exp(x) / (1 + x^2) 在区间 [0, 1] 上的积分。程序通过逐步减小步长 h 并迭代计算，直到前后两次计算结果的差小于预设的精度 eps（1e-8）。

运行程序，输出结果为：
```
the integral of f(x) from 0 to 1 is 
   1.28456821
```

因此，正确答案是 B。

{'22873':'B'}

------

### 题目22874
问题：2.输出sigma的值为多少（保留两位小数）？
A.81.35
B.81.34
C.81.33
D.81.32


**解析如下：**

------

解析：为了找到输出sigma的值，我们需要在程序中添加代码以打印sigma的值。在程序的第21行后添加一行代码 `cout << "sigma: " << sigma << endl;`，然后重新运行程序。

修改后的代码片段如下：
```cpp
18)       for (int i = 0; i < n; i++){       //求变步长梯形的和部分
19)           double x = a + (i + 0.5)*h;
20)           sigma += exp(x) / (1 + x*x);  //计算f(x)的值并求和
21)       }
22)       cout << "sigma: " << sigma << endl; // 添加这行代码以打印sigma的值
```

运行修改后的程序，输出结果中包含sigma的值：
```
sigma: 81.3413
```

保留两位小数，sigma的值为81.34。

因此，正确答案是 B。

{'22874':'B'}

------

### 题目22875
问题：3.while循环共执行了多少次？
A.6
B.7
C.8
D.9


**解析如下：**

------

解析：为了确定while循环执行的次数，我们可以在循环体内添加一个计数器来记录循环的次数。在程序的第16行前添加一个计数器变量 `int count = 0;`，并在循环体内增加 `count++`。

修改后的代码片段如下：
```cpp
10)       const double eps = 1e-8;
11)       int count = 0; // 添加计数器
12)       h = b - a;
...
16)       while (fabs(I2n - In) >= eps){       //求积分
17)           count++; // 计数器增加
18)           double sigma = 0.0;
...
28)       }
29)       cout << "the integral of f(x) from "
30)            << a << " to " << b << " is \n"
31)            << setiosflags(ios::fixed)
32)            << setprecision(8)
33)            << setw(10) << I2n << endl;
34)       cout << "while loop executed " << count << " times." << endl; // 打印循环次数
```

运行修改后的程序，输出结果中包含while循环的执行次数：
```
while loop executed 7 times.
```

因此，正确答案是 B。

{'22875':'B'}

------

